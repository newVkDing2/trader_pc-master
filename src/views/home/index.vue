<template>
  <div class="newhome-box">
    <div class="coincheck_home">
      <div class="coincheck_home_main">
        <main>
          <div class="main_text">
            <h1 class="main_text_h1">Own your first<br>cryptocurrency on<br>Coincheckusa!</h1>
            <div class="main_text_appeal">Number 1 in mobile app downloads *</div>
            <div class="main_text_comment">*Supported by App Tweak and refers to domestic crypto asset trading apps from January 2019 to December 2023.</div>
            <div class="registration_top">
                <div class="registration_top_user">
                  <div class="account_wrap">
                    <a class="create" href="/#/user/register">Create account</a>
                    <span class="login-link"><a class="here-is-login" href="/#/user/login">Click here if you already have an account</a></span>
                  </div>
                </div>
            </div>
          </div>
        </main>
      </div>
      <div class="coincheck_home_main_grandient"></div>


      <section class="main_section_contents reverse a-center">
        <div class="main_section_contents_img img_buysell">
          <img class="main_section_contents_img_device" src="@/assets/image/img_sp_ios_android_2020_02.png" alt="CoincheckアプリのUI">
        </div>
        <div class="main_section_contents_copy">
          <img class="main_section_contents_icon" src="@/assets/image/icon_buysell_2019.svg" alt="">
          <h2 class="main_section_contents_h2">Buy and sell<br>cryptocurrencies.</h2>
          <p class="main_section_contents_p">Buy and sell cryptocurrency for as little as 500 JPY 24/7.</p>
        </div>
      </section>
      <section class="main_section_contents a-center">
        <div class="main_section_contents_copy">
          <img class="main_section_contents_icon" src="@/assets/image/icon_sendreceive.svg" alt="">
          <h2 class="main_section_contents_h2">Transfer & Deposit<br>funds instantly</h2>
          <p class="main_section_contents_p">If you have the address, you can send cryptocurrencies to anywhere in the world, instantly. You can also display your QR code to receive coins immediately.</p>
        </div>
        <div class="main_section_contents_img img_sendreceive">
          <img class="main_section_contents_img_device" src="@/assets/image/img_sp_send_receive_2020_02.png" alt="Coincheckアプリの送金受取のUI">
        </div>
      </section>
      <section class="main_section_contents reverse a-center">
        <div class="main_section_contents_img img_tradeview">
          <img class="main_section_contents_img_device" src="@/assets/image/img_pc_trade_2020_02.png" alt="CoincheckトレードビューのUI">
          <div class="main_section_contents_img_device_after">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="レイヤー_1" x="0px" y="0px" viewBox="0 0 104 104" style="enable-background:new 0 0 104 104;" xml:space="preserve">
              <circle class="st21" cx="16" cy="16" r="8"/>
              <circle class="st21" cx="52" cy="16" r="8"/>
              <circle class="st21" cx="88" cy="16" r="8"/>
              <circle class="st21" cx="16" cy="52" r="8"/>
              <circle class="st21" cx="52" cy="52" r="8"/>
              <circle class="st21" cx="88" cy="52" r="8"/>
              <circle class="st21" cx="16" cy="88" r="8"/>
              <circle class="st21" cx="52" cy="88" r="8"/>
              <circle class="st21" cx="88" cy="88" r="8"/>
              <rect x="0" y="0" transform="matrix(2.110730e-10 -1 1 2.110730e-10 6.831388e-07 104)" class="st23" width="104" height="104"/>
            </svg>
          </div>
        </div>
        <div class="main_section_contents_copy">
          <h2 class="main_section_contents_h2">Use our Trade View<br>for professional<br>quality trading</h2>
          <p class="main_section_contents_p">Use the Coincheckusa Trade View in the browser to trade Bitcoin with no transaction fees.</p>
          <div class="main_section_contents_main">
            <a class="main_section_contents_a" href="/#/exchange" target="_blank">Use Trade View</a>
            <a class="main_section_contents_b" href="/#/exchange" target="_blank">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="レイヤー_1" x="0px" y="0px" viewBox="0 0 60 80" style="enable-background:new 0 0 60 80;" xml:space="preserve">
              <polygon class="st22" points="16.9,77.8 9.1,70.1 39.2,40 9.1,9.9 16.9,2.2 54.7,40 "/>
            </svg>
            </a>
          </div>
        </div>
      </section>
      <section class="main_section_contents a-center">
        <div class="main_section_contents_copy">
          <h2 class="main_section_contents_h2">Block trades at<br>favorable rates* available for<br>large transactions</h2>
          <p class="main_section_contents_p">During applicable weekday hours, use block trades to make large transactions at premium prices.<span class="main_section_contents_annotation">*There may be times when prices are comparable to the regular marketplace</span></p>
          <div class="main_section_contents_main">
            <a class="main_section_contents_a" href="/#/exchange" target="_blank">Learn more</a>
            <a class="main_section_contents_b" href="/#/exchange" target="_blank">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="レイヤー_1" x="0px" y="0px" viewBox="0 0 60 80" style="enable-background:new 0 0 60 80;" xml:space="preserve">
              <polygon class="st22" points="16.9,77.8 9.1,70.1 39.2,40 9.1,9.9 16.9,2.2 54.7,40 "/>
            </svg>
            </a>
          </div>
        </div>
        <div class="main_section_contents_img img_otc">
          <img class="main_section_contents_img_device" src="@/assets/image/img_pc_otc.png" alt="Coincheckアプリの送金受取のUI">
          <div class="main_section_contents_img_device_two">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="144" height="44" viewBox="0 0 144 44">
              <g id="dot_d" clip-path="url(#clip-path)">
                <g transform="translate(-489 -2484)">
                  <circle id="楕円形_1" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-464 -2484)">
                  <circle id="楕円形_1-2" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-439 -2484)">
                  <circle id="楕円形_1-3" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-414 -2484)">
                  <circle id="楕円形_1-4" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-389 -2484)">
                  <circle id="楕円形_1-5" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-364 -2484)">
                  <circle id="楕円形_1-6" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-489 -2459)">
                  <circle id="楕円形_1-7" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-464 -2459)">
                  <circle id="楕円形_1-8" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-439 -2459)">
                  <circle id="楕円形_1-9" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-414 -2459)">
                  <circle id="楕円形_1-10" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-389 -2459)">
                  <circle id="楕円形_1-11" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
                <g transform="translate(-364 -2459)">
                  <circle id="楕円形_1-12" data-name="楕円形 1" cx="6.5" cy="6.5" r="6.5" transform="translate(492 2485)" fill="#00ce28" opacity="0.117"/>
                </g>
              </g>
            </svg>
          </div>
        </div>
      </section>
      <section class="main_section_contents_full security">
        <div class="main_section_contents_full_description">
          <h2 class="main_section_contents_full_h2">Trade safely and securely</h2>
        </div>
        <div class="main_section_contents_full_lists">
          <div class="main_section_contents_full_lists_box">
            <img class="main_section_contents_full_lists_box_img" src="@/assets/image/icon_security_coldwallet_201905.svg" alt="Coincheckアプリのコールドウォレット">
            <h3 class="main_section_contents_full_lists_box_h3">Cold Wallet</h3>
            <p class="main_section_contents_full_lists_box_p">Customer assets are secured offline, providing top level security.</p>
          </div>
          <div class="main_section_contents_full_lists_box">
            <img class="main_section_contents_full_lists_box_img" src="@/assets/image/icon_security_sysytem_201905.svg" alt="Coincheckアプリのシステム監査">
            <h3 class="main_section_contents_full_lists_box_h3">System security</h3>
            <p class="main_section_contents_full_lists_box_p">We&#39;ve confirmed the security and efficiency of our systems with multiple information security firms from around the world.</p>
          </div>
          <div class="main_section_contents_full_lists_box">
            <img class="main_section_contents_full_lists_box_img" src="@/assets/image/icon_security_2fa_201905.svg" alt="Coincheckアプリの2段階認証">
            <h3 class="main_section_contents_full_lists_box_h3">Two-Factor Authentication</h3>
            <p class="main_section_contents_full_lists_box_p">Coincheckusa requires users to perform Two-Factor Authentication during login, helping you protect your account from malicious third parties with both a password and your phone.</p>
          </div>
        </div>
      </section>
      <section class="main_section_contents_full other">
        <h2 class="main_section_contents_full_h2">Other products</h2>
        <div class="main_section_contents_full_servicelinks">
          <a class="main_section_contents_servicelink" @click="() => navClick(0)" target="_blank">
            <div class="main_section_contents_servicebox reserves">
              <h3 class="main_section_contents_servicebox_h3"><br>Periodic Purchases</h3>
              <p class="main_section_contents_servicebox_p">Automatically purchase crypto each month and lower timing risk in your investments.</p>
              <p class="main_section_contents_servicebox_a">Learn more</p>
            </div>
          </a>
          <a class="main_section_contents_servicelink" @click="() => navClick(1)" target="_blank">
            <div class="main_section_contents_servicebox lending">
              <h3 class="main_section_contents_servicebox_h3"><br>Coincheckusa Lending</h3>
              <p class="main_section_contents_servicebox_p">Loan us your spare cryptocurrencies and grow your assets.</p>
              <p class="main_section_contents_servicebox_a">Learn more</p>
            </div>
          </a>
          <a class="main_section_contents_servicelink" @click="() => navClick(2)" target="_blank">
            <div class="main_section_contents_servicebox denki">
              <h3 class="main_section_contents_servicebox_h3"><br>Coincheckusa Denki</h3>
              <p class="main_section_contents_servicebox_p">Pay your electric bill with Bitcoin and earn cash back.</p>
              <p class="main_section_contents_servicebox_a">Learn more</p>
            </div>
          </a>
          <a class="main_section_contents_servicelink"  @click="() => navClick(3)" target="_blank">
            <div class="main_section_contents_servicebox gas">
              <h3 class="main_section_contents_servicebox_h3"><br>Coincheckusa Gas</h3>
              <p class="main_section_contents_servicebox_p">Pay your gas bill with Bitcoin and earn cash back.</p>
              <p class="main_section_contents_servicebox_a">Learn more</p>
            </div>
          </a>
          <a class="main_section_contents_servicelink"  @click="() => navClick(4)" target="_blank">
            <div class="main_section_contents_servicebox survey">
              <h3 class="main_section_contents_servicebox_h3"><br>Coincheckusa Surveys</h3>
              <p class="main_section_contents_servicebox_p">Answer surveys and receive Bitcoin, Ethereum, or Ripple!</p>
              <p class="main_section_contents_servicebox_a">Learn more</p>
            </div>
          </a>
        </div>
      </section>
      <hr class="main_hr">
      <section class="main_section_contents">
        <div class="main_section_contents_linkbox">
          <a class="main_section_contents_linkbox_a" @click="() => openNewPage('https://x.com/')" target="_blank">
            <div class="main_section_contents_linkbox_title">X</div>
          </a>
        </div>
        <div class="main_section_contents_linkbox">
          <a class="main_section_contents_linkbox_a" @click="() => openNewPage('https://corporate.coincheck.com/news')" target="_blank">
            <div class="main_section_contents_linkbox_title">Press</div>
          </a>
        </div>
        <div class="main_section_contents_linkbox">
          <a class="main_section_contents_linkbox_a" @click="() => openNewPage('https://corporate.coincheck.com/recruit')" target="_blank">
            <div class="main_section_contents_linkbox_title">Recruit</div>
          </a>
        </div>
      </section>
      <section class="main_section_contents_media">
        <h3 class="main_section_contents_media_h3">We have been featured in</h3>
        <div class="media_wrapper">
          <figure class="media_contents_image">
            <img src="@/assets/image/img-nikkei.png" alt="Nikkei">
          </figure>
          <figure class="media_contents_image">
            <img src="@/assets/image/img-wired.png" alt="WIRED">
          </figure>
          <figure class="media_contents_image">
            <img src="@/assets/image/img-asahi.png" alt="Asahi">
          </figure>
          <figure class="media_contents_image">
            <img src="@/assets/image/img-yomiuri.png" alt="Yomiuri">
          </figure>
          <figure class="media_contents_image">
            <img src="@/assets/image/img-wbs.png" alt="WBS">
          </figure>
          <figure class="media_contents_image">
            <img src="@/assets/image/img-tech.png" alt="TC">
          </figure>
        </div>
      </section>
      <hr class="main_hr">
      <div class="bottom_notice rsv-container"><p class="bold">Important notice about cryptocurrency trading</p> <ul class="ul-en">
        <li>Virtual currency is not a national currency in or outside of Japan.</li>
        <li>Virtual currency handled by the Company is a “decentralized virtual currency” that is traded and issued on the Internet, and the value of a virtual currency is not guaranteed by neither a particular nation nor other people.</li>
        <li>In Virtual Currency Trading, there is a risk that customers will incur losses due to value fluctuations of the virtual currency being traded. Further, in leveraged trading and margin trading, since the transaction amount is larger than the amount of virtual currency or margin that a customer deposits with the Company, there is a risk that customers will incur losses greater than the amount of virtual currency or margin.</li>
        <li>In Virtual Currency Trading, there is a possibility that customers may not be able to place trades as they intend due to the fact that the difference between sell and buy prices of virtual currency will spread and orders may be suspended temporarily in the event of sudden market fluctuations, reduced liquidity, or other such situations.</li>
        <li>Processing of transactions may be delayed, or placement, execution, confirmation and cancellation of orders may be invalidated due to a failure in the transaction system required for Virtual Currency Trading or the communication lines connecting the Company and customers.</li>
        <li>There is a risk that virtual currency will be lost in whole or in part due to a cyber-attack or other such causes.</li>
        <li>There is a risk that the Company will not be able to continue its business if the external environment changes (including tightening of regulations for virtual currencies), the Company’s financial condition deteriorates, or any service provider falls into bankruptcy. If the Company falls into bankruptcy, the Company will not be able to return assets to customers, and there is a possibility that customers will incur losses.</li>
        <li>The Company may receive fiat or cryptocurrency compensation directly or indirectly from the creators of relevant currencies or other interested parties when listing new currencies.</li>
        <li>Assets deposited by customers are subject to the obligation to manage separately from the Company’s own assets, and they will be managed separately from the Company’s own money and virtual currency as follows. However, margin used on leveraged trading is not a subject to segregated management of customers assets. For more information, please refer to “11. Separation management”.</li> <div class="supplement"> 1) Money:<br> Customer’s trading account at Resona Bank, Ltd., SBI Sumishin Net Bank, Ltd., GMO Aozora Net Bank, Ltd., or ORIX Bank Corporation.<br> 2) Virtual Currency:<br> Virtual currency is stored in a cold wallet disconnected from the Internet or other external networks, or in a hot wallet connected to the Internet or other external networks, in such a manner that each customer’s amount is immediately recognizable as data. </div>
        <li>Transaction fees and other fees are required for Virtual Currency Trading. Please see “11. Fees, etc.” for details.</li></ul></div>
    </div>
  </div>
</template>

<script>
import {getDataApi} from "@/api/system";
import {mapActions, mapGetters, mapMutations} from "vuex";
import {getExchangeOptionalApi, getMqttInitDataApi} from "@/api/fullScreen";
import {getAppApi} from "@/api/application";
import {getNoticeList} from "@/api/common";
import {numberFilterFun, toThousands} from "@/util/util";
import QRCode from "qrcodejs2";
import mqtt from "@/mixins/mqtt";
import BScroll from "better-scroll";

export default {
  mixins: [mqtt],
  data() {
    return {
      window: "",
      index_config: {}, //首页配置
      index_value: "",
      //新闻
      gg_newsData: [],
      hd_newsData: [],
      // 行情
      allMarketData: {},
      marketTabs: [], //行情分类数据
      marketSearch: "",
      marketActive: "", //当前选择的行情分类
      marketMqtt: null,
      marketZxData: [], //自选数据
      // 介绍
      appType: "ios",
      appIosUrl: false,
      appAndroidUrl: false,
      // 学院
      collegeData: [],
      activeName: "hot",
      showDialog: true,
      noticeContent: "", //公告内容
      downloadArr: [], //下载
      scroll: "",
      openAnnoDialog: false,
    };
  },
  created() {
    this.getCoinList();
    // this.scrollTo2();
  },
  mounted() {
    // console.log("settingConfig==>",this.settingConfig);
    this.downloadArr = this.settingConfig.DOWNLOAD_SETTING;
    this.getNoticeList("ROLL_NOTICE");
    // this.scrollTo2();
    setTimeout(() => {
      this.scrollTo2();
    }, 10);
    // this.scrollTo();
  },
  computed: {
    ...mapGetters([
      "allImgUrl",
      "isLogin",
      "themeName",
      "language",
      "exchangeCode",
      "exchange",
      "allCoinPriceInfo",
      "secondContractCoinList",
      "exchangeNum",
      "settingConfig",
    ]),
    currMarketTable() {
      let data = [];
      if (this.marketActive != "zx") {
        data = this.deepClone(
          this.allMarketData[this.marketActive]
            ? this.allMarketData[this.marketActive]
            : []
        );
      } else {
        data = this.marketZxData;
      }

      if (this.marketSearch) {
        data = data.filter(
          (item) =>
            item.bzmc.toLowerCase().indexOf(this.marketSearch.toLowerCase()) !=
            -1
        );
      }
      return data;
    },
  },
  watch: {
    language(newLang, oldLang) {
      // console.log("oldLang==>", oldLang);
      // console.log("newLang==>", newLang);
      // this.selectLangInit();
      this.getNoticeList("ROLL_NOTICE");
    },
    // secondContractCoinList(newValue, oldValue) {
    //   // 当列表更新时，根据需要更新hoverStates
    //   newValue.forEach((item, index) => {
    //     // 初始化新增项目的hover状态
    //     if (!(index in this.hoverStates)) {
    //       this.$set(this.hoverStates, index, false);
    //     }
    //   });
    //   // 清理已经不存在的项目的hover状态
    //   for (let key in this.hoverStates) {
    //     if (!newValue[key]) {
    //       this.$delete(this.hoverStates, key);
    //     }
    //   }
    // }
  },
  filters: {
    toThousandsFilter(value) {
      return toThousands(value);
    },
    dzfFilter(value) {
      if (value >= 0) {
        return `+${value}%`;
      } else {
        return `${value}%`;
      }
    },
  },
  methods: {
    ...mapActions(["getCoinList"]),
    ...mapMutations(["SET_CURR_COIN", "SET_DEAL_TYPE"]),
    openNewPage(url) {
      if (url === 'https://x.com/') {
        window.open(url)
      }
      this.$message({
        message: this.$t('indexAdd.repairTips'),
        type: "success",
      })
      setTimeout(() => {
        window.open(url)
      }, 2000)
    },
    scrollTo2() {
      if (this.secondContractCoinList.length > 0) {
        let width = this.secondContractCoinList.length * 300;
        this.$refs.innerContainer.style.width = width + "px";
        this.$nextTick(() => {
          if (!this.scroll) {
            this.scroll = new BScroll(this.$refs.wrapper, {
              startX: 0,
              click: true,
              scrollX: true,
              scrollY: false,
              eventPassthrough: "vertical",
              // preventDefault: false,
              // bounce: false,
              // probeType: 3,
              // mouseWheel: {
              //   speed: 20,
              // },
            });
          } else {
            this.scroll.refresh();
          }
        });
      }
    },
    scrollTo() {
      let startX;
      let currentX = 0;
      let moving = false;
      let velocity = 0;
      const container = this.$refs.innerContainer;
      const maxScrollWidth =
        container.offsetWidth - container.parentElement.offsetWidth;

      const startSliding = (event) => {
        moving = true;
        velocity = 0;
        startX = event.type.includes("mouse")
          ? event.pageX
          : event.touches[0].clientX;
        container.style.transition = "none";
      };

      const sliding = (event) => {
        if (!moving) return;
        const x = event.type.includes("mouse")
          ? event.pageX
          : event.touches[0].clientX;
        const diffX = x - startX;
        velocity = diffX; // 更新速度
        currentX += diffX;
        currentX = Math.min(currentX, 0); // 防止向右滑动过度
        currentX = Math.max(currentX, -maxScrollWidth); // 条件滑动超出左边

        container.style.transform = `translateX(${currentX}px)`;
        startX = x;
      };

      const stopSliding = () => {
        moving = false;
        const inertiaMove = currentX + velocity * 10; // 根据速度进行惯性滑动
        currentX = Math.round(inertiaMove / (80 + 20)) * (80 + 20); // 这里的(80+20)是一个item的宽加间距
        currentX = Math.min(currentX, 0); // 防止向右滑动过度
        currentX = Math.max(currentX, -maxScrollWidth); // 防止向左滑动过度
        container.style.transition =
          "transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)"; // 在这里也添加 cubic-bezier
        container.style.transform = `translateX(${currentX}px)`;
      };

      container.addEventListener("mousedown", startSliding);
      document.addEventListener("mousemove", sliding);
      document.addEventListener("mouseup", stopSliding);
      container.addEventListener("touchstart", startSliding);
      document.addEventListener("touchmove", sliding);
      document.addEventListener("touchend", stopSliding);
    },
    initFun() {
      this.init = true;
      this.selectLangInit();
      this.getMarketIndexData();
      this.getAppFun();
      this.getOptionalDataFun();
      //连接首页行情mqtt
      this.marketMqtt = this.initMqtt("index", (data) => {
        this.allMarketData = data;
      });
      //连接行情mqtt 更新自选
      if (this.isLogin) {
        this.initMqtt("all_symbol_detail", (data) => {
          let exchangeData = {
            close: Number(data.close),
            zdf: data.zdf - 0, //涨跌幅
            cjl: Number(data.amount),
            cje: Number(data.vol), //24小时成交额
          };
          //更新自选数据
          let type = data.type;
          this.marketZxData = this.marketZxData.map((item) => {
            if (item.symbol_name == data.symbolName) {
              if (
                (type == "xh" && item.contract_type != "0") ||
                !item.contract_type
              ) {
                return item;
              }
              if (type == "ubw" && item.contract_type != "1") {
                return item;
              }
              if (type == "bbw" && item.contract_type != "2") {
                return item;
              }
              item = {
                ...item,
                ...exchangeData,
              };
            }
            return item;
          });
        });
      }
    },
    navigateToTrade(coin) {
      this.$router.push({
        path: "/trade/index",
        query: { type: "sec", symbol: coin },
      });
    },
    //获取公告信息
    getNoticeList(key) {
      getNoticeList({
        key,
      }).then((res) => {
        console.log("公告信息====>", res.data);
        this.noticeContent = res.data.data[0].noticeContent;
      });
    },
    //获取自选数据
    getOptionalDataFun() {
      if (!this.isLogin) {
        return false;
      }
      getExchangeOptionalApi().then((res) => {
        let data = res.data.data.filter((item) => item.contract_type == "0");
        data = data.map((item) => {
          item.bzicon = item.avatar;
          item.bzmc = item.symbol_name;
          item.close = Number(item.close);
          item.cjl = Number(item.amount);
          item.cje = Number(item.vol);
          item.zdf = item.zdf - 0;
          return item;
        });
        this.marketZxData = data;
      });
    },
    //获取app链接
    getAppFun() {
      let arr = ["Android", "Ios"];
      let promiseArr = [];

      arr.forEach((item) => {
        promiseArr.push(
          new Promise((resolve, reject) => {
            getAppApi(item)
              .then((res) => {
                resolve({ type: item, url: res.data.data });
              })
              .catch(() => {
                reject();
              });
          })
        );
      });

      Promise.all(promiseArr).then((res) => {
        this.appUrlList = res;
        this.appUrlList.forEach((item) => {
          if (item.url) {
            this.setQrCodeFun(item.type, item.url);
            if (item.type == "Android") {
              this.appAndroidUrl = item.url;
            } else if (item.type == "Ios") {
              this.appIosUrl = item.url;
            }
          }
        });
        if (!this.appIosUrl) {
          this.appType = "android";
        }
      });
    },
    //生成二维码
    setQrCodeFun(type, url) {
      setTimeout(() => {
        console.log(this.$refs);
        this.$refs[`qrcode_${type}`][0].innerHTML = "";
        new QRCode(`qrcode_${type}`, {
          width: 120,
          height: 120,
          text: url,
          render: "canvas",
          correctLevel: QRCode.CorrectLevel.L,
        });
      }, 0);
    },
    selectLangInit() {
      this.getNewsDataFun();
      this.getCollegeDataFun();
    },
    //获取行情基础数据
    getMarketIndexData() {
      getMqttInitDataApi("index").then((res) => {
        let data = res.data.data;
        let keys = Object.keys(data);
        if (keys.length <= 0) {
          return false;
        }
        for (let key in data) {
          data[key] = data[key].map((item) => {
            item.zdf = Number(item.zdf);
            return item;
          });
        }
        this.allMarketData = data;
      });
    },
    //获取新闻列表
    getNewsDataFun() {
      //公告
      getDataApi("1530431184536666113", {
        ...this.index_config.index_news.gg_search_params,
        article_lang: this.language,
      }).then((res) => {
        let data = res.data.data.records;
        this.gg_newsData = data.map((item) => {
          item.article_time = item.article_time.split(
            `${new Date().getFullYear()}-`
          )[1];
          return item;
        });
      });
      //活动
      getDataApi("1530431184536666113", {
        ...this.index_config.index_news.hd_search_params,
        article_lang: this.language,
      }).then((res) => {
        let data = res.data.data.records;
        this.hd_newsData = data;
      });
    },
    //获取学院列表
    getCollegeDataFun() {
      getDataApi("1530431184536666113", {
        ...this.index_config.index_college.search_params,
        article_lang: this.language,
      }).then((res) => {
        let data = res.data.data.records;
        this.collegeData = data;
      });
    },
    getConfigFun(key, nullValue) {
      let keyArr = key.split(".");
      let data = this.index_config;
      let bool = true;
      keyArr.forEach((item) => {
        if (data[item] !== undefined && bool) {
          data = data[item];
        } else {
          bool = false;
        }
      });
      if (!bool) {
        return nullValue ? nullValue : "";
      }
      if (key == "index_market.market_list") {
        //添加自选
        data = [
          {
            label_code: "optional",
            label_path: "exchange",
            value: "zx",
          },
          ...data,
        ];
      }
      return data;
    },
    getImgUrlFun(code, type) {
      if (typeof code == "string" && code.indexOf(".") != -1) {
        code = this.getConfigFun(code);
      }
      if (type) {
        code = code[type];
      }
      return this.allImgUrl[code] ? this.allImgUrl[code] : "";
    },
    currCoinLangFun(code, type = "home_index") {
      // if (code && code.indexOf(".") != -1) {
      //   code = this.getConfigFun(code);
      // }
      // return this.coinLangFun(type, code);
    },
    openUrlFun(url) {
      if (url) {
        window.open(url, "_blank");
      }
    },
    exchangeFilter(type, data) {
      let money = data[type];
      return `${this.exchangeCode}${numberFilterFun(
        Number(money).myMul(this.exchangeNum)
      )}`;
    },
    openDealFun(row) {
      this.SET_DEAL_TYPE("cash");
      this.SET_CURR_COIN({
        ...row,
        coinInfo: {},
        coinMoneyData: { closeData: {}, riseFallData: {} },
      });
      let path = `/exchange/full-screen/${row.symbolName.replace("/", "_")}`;
      this.$router.push({ path });
    },
    navClick(index) {
      // this.$router.push({ path: '/trade/index' })
      switch (index) {
        case 0:
          this.$router.push({ path: '/reserves' })
          break
        case 1:
          this.$router.push({ path: '/lending' })
          break
        case 2:
          this.$router.push({ path: '/denki' })
          break
        case 3:
          this.$router.push({ path: '/gas' })
          break
        case 4:
          this.$router.push({ path: '/survey' })
          break
      }
      console.log('低钠基了')
    }
  },
};
</script>

<style lang="scss" scoped>
.coincheck_home {
  font-family: 'Helvetica', "游ゴシック Medium", "Yu Gothic Medium", "游ゴシック体", YuGothic, 'Hiragino Kaku Gothic Pro', Meiryo, 'MS PGothic', sans-serif;
  font-size: 15px;
  line-height: 1.4;
  color: #333;
  -webkit-font-smoothing: antialiased;
  background: #fff;
  line-height: 1.3;
}
.coincheck_home_main {
  background-color: #eef1f6;
}

@media (max-width: 1200px) {
  .coincheck_home main {
      min-width: 1024px;
  }
}

.coincheck_home main {
  width: 100%;
  box-sizing: border-box;
  display: block;
  position: relative;
  background: url(https://coincheck.com/images/lp/mainpage/top_bg_img_2020_02.png) 2000% 45% no-repeat;
  background-size: 99%;
  background-color: #eef1f6;
  max-width: 1500px;
  min-width: 1200px;
  margin: auto;
  min-height: 44rem;
}
@media (max-width: 1200px) {
  .coincheck_home .main_text {
      width: 95%;
  }
}

.coincheck_home .main_text {
  width: 1120px;
  margin: auto;
  padding: 10rem 0 0;
  color: #12575F;
}

.coincheck_home .main_text_h1 {
  font-size: 48px;
  line-height: 1.21;
  margin: 0 0 40px;
}

.coincheck_home .main_text_appeal {
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 13px;
  position: relative;
}

.coincheck_home .main_text_comment {
  font-size: 11px;
  color: #12575f;
  opacity: 0.5;
  font-weight: normal;
  margin-bottom: 40px;
}

.registration_top {
  width: 440px;
  box-sizing: border-box;
}

.registration_top .account_wrap {
  width: 100%;
  box-sizing: border-box;
}
.registration_top .account_wrap .create {
  color: #fff;
  background: #09BA85;
  border-radius: .5rem;
  border: none;
  padding: .8rem 1.4rem;
  font-size: 1rem;
  font-weight: bold;
  margin: 0 0 1rem;
  letter-spacing: .05rem;
  width: 200px;
  display: inline-block;
  text-align: center;
  transition: .25s;
}
.registration_top .account_wrap .create:hover{
  background: #8BE5C9;
}

.registration_top .account_wrap .login-link {
  font-size: 12px;
  margin-left: 32px;
}

.registration_top .account_wrap .login-link .here-is-login:after {
  content: '';
  width: 10px;
  height: 13px;
  background: url(https://coincheck.com/images/lp/mainpage/icon_arrow.svg) no-repeat center;
  display: inline-block;
  margin: 0 0 -2px .3rem;
}

.coincheck_home_main_grandient {
  background: #eef1f6;
  background: -webkit-linear-gradient(top, #eef1f6 0%, #fff 100%);
  background: linear-gradient(to bottom, #eef1f6 0%, #fff 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eef1f6', endColorstr='#fff',GradientType=0 );
  min-height: 25px;
  margin: 0 0 2rem;
}

.coincheck_home .a-center {
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
}

.coincheck_home .main_section_contents {
  color: #12575F;
  width: 80%;
  max-width: 1080px;
  margin: 0 auto 80px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

.coincheck_home .main_section_contents_img {
  width: 50%;
  height: 64%;
  display: inline-block;
}

.coincheck_home .main_section_contents_img_device {
  float: left;
}

.main_section_contents_img.img_tradeview{
  position: relative;
}
.main_section_contents_img.img_otc{
  position: relative;
}
.main_section_contents_img_device_two{
  position: absolute;
  left: -2rem;
  bottom: 11rem;
}
.coincheck_home .main_section_contents_img_device_after {
  position: absolute;
  bottom: 10rem;
  left: -2rem;
  width: 5rem;
  height: 5rem;
  .st0{fill:#38C7A7;}
  .st1{fill:#FFFFFF;}
  .st2{fill:none;}
  .st3{fill:#22C2D3;}
  .st4{fill:#E3F7F9;}
  .st5{fill:none;stroke:#22C2D3;stroke-width:8.5039;stroke-miterlimit:10;}
  .st6{fill:#C5EFE5;}
  .st7{fill:none;stroke:#22C2D3;stroke-width:8.5039;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
  .st8{fill:#A0E5EC;}
  .st9{fill:none;stroke:#22C2D3;stroke-width:16;stroke-linejoin:round;stroke-miterlimit:10;}
  .st10{fill:#FFFFFF;stroke:#22C2D3;stroke-width:16;stroke-linejoin:round;stroke-miterlimit:10;}
  .st11{fill:none;stroke:#22C2D3;stroke-width:8;stroke-linejoin:round;stroke-miterlimit:10;}
  .st12{fill:none;stroke:#22C2D3;stroke-width:11.7997;stroke-miterlimit:10;}
  .st13{fill:#FFFFFF;stroke:#22C2D3;stroke-width:14.6446;stroke-linejoin:round;stroke-miterlimit:10;}
  .st14{fill:#FFFFFF;stroke:#22C2D3;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
  .st15{opacity:0.15;}
  .st16{opacity:0.15;fill:#22C2D3;}
  .st17{fill:none;stroke:#22C2D3;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
  .st18{fill:none;stroke:#22C2D3;stroke-width:14.645;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
  .st19{fill:#11C1A4;}
  .st20{fill:none;stroke:#11C1A4;stroke-width:11;stroke-miterlimit:10;}
  .st21{opacity:0.3;fill:#FF86AB;}
  .st22{opacity:0.3;fill:#FF7F00;}
  .st23{opacity:0.3;fill:none;}
  .st24{opacity:0.3;fill:#9D86FF;}
}

.coincheck_home img {
  max-width: 100%;
  margin: 0;
  padding: 0;
  display: block;
}

.coincheck_home .main_section_contents_copy {
  width: 40%;
  .main_section_contents_b{
    width: 10px;
    height: 13px;
    margin-left: .5rem;
    svg{
      width: 10px;
      height: 13px;
    }
    .st0{fill:#38C7A7;}
    .st1{fill:#FFFFFF;}
    .st2{fill:none;}
    .st3{fill:#22C2D3;}
    .st4{fill:#E3F7F9;}
    .st5{fill:none;stroke:#22C2D3;stroke-width:8.5039;stroke-miterlimit:10;}
    .st6{fill:none;stroke:#22C2D3;stroke-width:17.0079;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
    .st7{fill:#C5EFE5;}
    .st8{fill:none;stroke:#22C2D3;stroke-width:8.5039;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
    .st9{fill:#A0E5EC;}
    .st10{fill:none;stroke:#22C2D3;stroke-width:16;stroke-linejoin:round;stroke-miterlimit:10;}
    .st11{fill:#FFFFFF;stroke:#22C2D3;stroke-width:16;stroke-linejoin:round;stroke-miterlimit:10;}
    .st12{fill:#FFFFFF;stroke:#22C2D3;stroke-width:8;stroke-linejoin:round;stroke-miterlimit:10;}
    .st13{fill:none;stroke:#22C2D3;stroke-width:16;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:30.846,82.2559;}
    .st14{fill:none;stroke:#22C2D3;stroke-width:8;stroke-linejoin:round;stroke-miterlimit:10;}
    .st15{fill:none;stroke:#22C2D3;stroke-width:11.7997;stroke-miterlimit:10;}
    .st16{fill:#FFFFFF;stroke:#22C2D3;stroke-width:14.6446;stroke-linejoin:round;stroke-miterlimit:10;}
    .st17{fill:#FFFFFF;stroke:#22C2D3;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
    .st18{opacity:0.3;fill:#22C2D3;}
    .st19{opacity:0.3;}
    .st20{fill:none;stroke:#22C2D3;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
    .st21{fill:none;stroke:#22C2D3;stroke-width:14.645;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
    .st22{fill:#11C1A4;}
    .st23{fill:none;stroke:#11C1A4;stroke-width:11;stroke-miterlimit:10;}
  }
  .main_section_contents_a{
    font-weight: bold;
    color: #008670;
  }
}
.main_section_contents_main:hover{
  .main_section_contents_b{
    margin-left: .8rem;
    transition-duration: 0.3s;
  }
  .main_section_contents_a{
    color: #0fa98f;
    transition-duration: 0.3s;
  }
}

.coincheck_home .main_section_contents_icon {
  width: 120px;
  margin: 20px 0;
  float: none;
}

.coincheck_home img {
  max-width: 100%;
  margin: 0;
  padding: 0;
  display: block;
}

.coincheck_home .main_section_contents_h2 {
  font-size: 2.5rem;
  margin: 0 0 20px;
}

.coincheck_home h1, .coincheck_home h2, .coincheck_home h3, .coincheck_home h4, .coincheck_home h5, .coincheck_home h6 {
  font-weight: 600;
}

.coincheck_home .main_section_contents_p {
  margin: 0 0 20px;
}

.coincheck_home p {
  line-height: 1.5;
}

.coincheck_home .security {
  background: rgba(255, 206, 0, 0.1);
}

.coincheck_home .main_section_contents_full {
  margin: auto;
  padding: 64px;
  color: #12575F;
  overflow: auto;
}

.coincheck_home .main_section_contents_full_description {
  width: 100%;
  text-align: center;
}

.coincheck_home .main_section_contents_full_h2 {
  font-size: 2.5rem;
  margin: 0 0 4rem;
  text-align: center;
}

.coincheck_home .main_section_contents_full_lists {
  max-width: 1080px;
  margin: 0 auto 2rem;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

.coincheck_home .main_section_contents_full {
  margin: auto;
  padding: 64px;
  color: #12575F;
  overflow: auto;
}

.coincheck_home .main_section_contents_full_lists_box {
  border-radius: 2rem;
  background: white;
  box-shadow: 0 0 30px rgba(255, 199, 0, 0.15);
  padding: 3rem 2.2rem;
  text-align: center;
  width: 32%;
  box-sizing: border-box;
}

.coincheck_home .main_section_contents_full_lists_box_img {
  width: 120px;
  margin: 0 auto 1rem;
}

.coincheck_home img {
  max-width: 100%;
  margin: 0;
  padding: 0;
  display: block;
}

.coincheck_home .main_section_contents_full_lists_box_h3 {
  font-size: 24px;
  margin: 0 auto .5rem;
}

.coincheck_home p {
  line-height: 1.5;
}

.coincheck_home .main_section_contents_full {
  margin: auto;
  padding: 64px;
  color: #12575F;
  overflow: auto;
}

.coincheck_home .main_section_contents_full_h2 {
  font-size: 2.5rem;
  margin: 0 0 4rem;
  text-align: center;
}

.coincheck_home .main_section_contents_full_servicelinks {
  max-width: 1080px;
  margin: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}

.coincheck_home .main_section_contents_servicelink {
  cursor: pointer;
  width: 49%;
  float: left;
  margin: 0 2% 2% 0;
}

.coincheck_home a {
  text-decoration: none;
}

.coincheck_home .main_section_contents_servicelink .reserves {
  background: url(https://coincheck.com/images/lp/mainpage/img_reserve.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicebox {
  border: 0.5rem solid rgba(17, 193, 164, 0.12);
  border-radius: 2rem;
  padding: 4rem;
  height: 22rem;
  box-sizing: border-box;
  -webkit-transition: all 0.25sease 0s;
  transition: .25s;
}
.coincheck_home .main_section_contents_servicebox:hover{
  border: 0.5rem solid rgba(17,193,164,0.4);
  background: red;
  .main_section_contents_servicebox_a:after{
    transition: .25s;
    margin-left: .7rem;
    color: rgba(17,193,164,0.4);
  }
}
.coincheck_home .main_section_contents_servicelink:nth-child(even) {
  margin: 0px;
}

.coincheck_home .main_section_contents_servicelink {
  cursor: pointer;
  width: 49%;
  float: left;
  margin: 0 2% 2% 0;
}

.coincheck_home .main_section_contents_servicelink .lending {
  background: url(https://coincheck.com/images/lp/mainpage/img_lending.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicebox_h3 {
  font-size: 2rem;
  line-height: 1.2;
  margin: 0 0 1rem;
}

.coincheck_home .main_section_contents_servicelink:hover>.main_section_contents_servicebox>.main_section_contents_servicebox_a {
  color: #0fa98f;
  -webkit-transition: .25s;
  transition: .25s;
}

.coincheck_home .main_section_contents_servicelink .reserves {
  background: url(https://coincheck.com/images/lp/mainpage/img_reserve.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicelink .denki {
  background: url(https://coincheck.com/images/lp/mainpage/img_denki.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicelink .gas {
  background: url(https://coincheck.com/images/lp/mainpage/img_gas.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicelink .survey {
  background: url(https://coincheck.com/images/lp/mainpage/img_survey.svg) no-repeat right bottom;
  background-size: 50%;
}

.coincheck_home .main_section_contents_servicebox_a:after {
  content: '';
  width: 10px;
  height: 13px;
  background: url(https://coincheck.com/images/lp/mainpage/icon_arrow.svg) no-repeat center;
  display: inline-block;
  transition: .25s;
  margin-left: .5rem;
}

.coincheck_home .main_hr {
  height: 6px;
  background-color: #F0F0F0;
  margin: 0 0 80px;
}

.coincheck_home hr {
  background-color: #dde4e6;
  border: 0;
  height: 1px;
  margin-top: 40px;
}

.coincheck_home .main_section_contents {
  color: #12575F;
  width: 80%;
  max-width: 1080px;
  margin: 0 auto 80px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

.coincheck_home .main_section_contents_linkbox {
  width: 23%;
  cursor: pointer;
}

.coincheck_home a {
  text-decoration: none;
}

.coincheck_home .main_section_contents_linkbox_title {
  border: 6px solid rgba(17, 193, 164, 0.12);
  border-radius: 12px;
  padding: 1.4rem 1rem;
  margin: 0 0 1rem;
  text-align: center;
  font-size: 1.25rem;
  font-weight: bold;
  letter-spacing: .1rem;
  -webkit-transition: all 0.25sease 0s;
  transition: .25s;
}
.coincheck_home .main_section_contents_linkbox_title:hover{
  border: 6px solid rgba(17,193,164,0.4);
}

.coincheck_home .main_section_contents_media_h3 {
  text-align: center;
  margin: 0 auto 40px;
  font-size: 1.5rem;
}
.coincheck_home .media_wrapper {
  width: 940px;
  margin: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  opacity: .5;
}

.coincheck_home .bottom_notice {
  color: rgba(15, 92, 101, 0.6);
  font-size: 11px;
  line-height: 1.5;
  padding: 40px 0;
}
.rsv-container {
  width: 1120px;
  margin-left: auto;
  margin-right: auto;
}


.coincheck_home .main_section_contents_media {
  color: #12575F;
  margin: 0 auto 80px;
  width: 100%;
  max-width: 1200px;
}
</style>
